<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeonChat - –ß–∞—Ç —Å –¥—Ä—É–∑—å—è–º–∏</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" type="image/x-icon" href="https://img.icons8.com/color/96/000000/chat--v1.png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }

        :root {
            --primary: #4361ee;
            --primary-dark: #3a56d4;
            --secondary: #7209b7;
            --dark: #1a1a2e;
            --darker: #16213e;
            --light: #ffffff;
            --gray: #8a8d93;
            --gray-dark: #2d3748;
            --success: #4cc9f0;
            --danger: #f72585;
            --warning: #f8961e;
            --online: #4ade80;
            --offline: #ef4444;
            --idle: #f59e0b;
            
            --bg-main: var(--light);
            --bg-sidebar: #f8fafc;
            --bg-message: #f1f5f9;
            --bg-own: #e0e7ff;
            --text-main: #1e293b;
            --text-secondary: #64748b;
            --border: #e2e8f0;
            --shadow: rgba(0, 0, 0, 0.1);
        }

        .dark-theme {
            --primary: #4f46e5;
            --primary-dark: #4338ca;
            --secondary: #7c3aed;
            --bg-main: #0f172a;
            --bg-sidebar: #1e293b;
            --bg-message: #334155;
            --bg-own: #3730a3;
            --text-main: #f1f5f9;
            --text-secondary: #cbd5e1;
            --border: #475569;
            --shadow: rgba(0, 0, 0, 0.3);
        }

        body {
            background-color: var(--bg-main);
            color: var(--text-main);
            transition: all 0.3s ease;
            height: 100vh;
            overflow: hidden;
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(1.3); opacity: 0; }
        }

        @keyframes slideIn {
            from { transform: translateX(-20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
        .app-container {
            display: flex;
            height: 100vh;
            max-width: 1600px;
            margin: 0 auto;
        }

        /* –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å */
        .sidebar {
            width: 280px;
            background: var(--bg-sidebar);
            border-right: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            transition: all 0.3s ease;
        }

        .user-profile {
            padding: 24px 20px;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 15px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
        }

        .user-avatar {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            backdrop-filter: blur(10px);
            position: relative;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .user-talking .user-avatar::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 2px solid var(--success);
            animation: pulse 1.5s infinite;
            top: -2px;
            left: -2px;
        }

        .user-details {
            flex: 1;
        }

        .user-name {
            font-weight: 700;
            font-size: 18px;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .edit-name-btn {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            cursor: pointer;
            font-size: 12px;
            transition: color 0.2s;
        }

        .edit-name-btn:hover {
            color: white;
        }

        .user-status {
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 6px;
            opacity: 0.9;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--online);
        }

        /* –ö–∞–Ω–∞–ª—ã */
        .channels-section {
            padding: 20px;
            flex: 1;
            overflow-y: auto;
        }

        .section-title {
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            color: var(--text-secondary);
            margin-bottom: 16px;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .channels-list, .users-list {
            margin-bottom: 32px;
        }

        .channel-item, .user-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            margin-bottom: 8px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            color: var(--text-main);
        }

        .channel-item:hover, .user-item:hover {
            background: var(--bg-message);
            transform: translateX(4px);
        }

        .channel-item.active, .user-item.active {
            background: var(--primary);
            color: white;
        }

        .channel-icon, .user-avatar-small {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .user-avatar-small {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            font-weight: bold;
            font-size: 14px;
        }

        .user-info {
            flex: 1;
        }

        .user-item-name {
            font-weight: 500;
            font-size: 14px;
        }

        .user-item-status {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .user-item.active .user-item-status {
            color: rgba(255, 255, 255, 0.8);
        }

        .empty-contacts {
            text-align: center;
            padding: 20px;
            color: var(--text-secondary);
            font-size: 14px;
        }

        /* –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–æ–ª–æ—Å–æ–º */
        .voice-controls {
            padding: 20px;
            border-top: 1px solid var(--border);
            margin-top: auto;
        }

        .voice-btn {
            width: 100%;
            padding: 14px;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.2s;
            margin-bottom: 12px;
            font-size: 15px;
        }

        .connect-voice {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(67, 97, 238, 0.3);
        }

        .disconnect-voice {
            background: var(--danger);
            color: white;
        }

        .voice-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(67, 97, 238, 0.4);
        }

        .voice-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .voice-indicator {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 13px;
            color: var(--success);
            margin-top: 8px;
            display: none;
        }

        /* –û—Å–Ω–æ–≤–Ω–æ–π —á–∞—Ç */
        .chat-main {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: var(--bg-main);
        }

        .chat-header {
            padding: 20px 24px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--bg-sidebar);
        }

        .chat-info {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .chat-type-badge {
            padding: 6px 12px;
            background: var(--primary);
            color: white;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .chat-actions {
            display: flex;
            gap: 12px;
        }

        .action-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--bg-message);
            border: none;
            color: var(--text-main);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .action-btn:hover {
            background: var(--primary);
            color: white;
            transform: rotate(15deg);
        }

        /* –°–æ–æ–±—â–µ–Ω–∏—è */
        .messages-container {
            flex: 1;
            padding: 24px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .message {
            display: flex;
            gap: 16px;
            max-width: 75%;
            animation: slideIn 0.3s ease;
        }

        .message.own {
            margin-left: auto;
            flex-direction: row-reverse;
        }

        .message-system {
            max-width: 100%;
            justify-content: center;
            margin: 10px 0;
        }

        .message-system .message-content {
            background: rgba(67, 97, 238, 0.1);
            color: var(--primary);
            padding: 8px 16px;
            border-radius: 12px;
            font-size: 14px;
        }

        .message-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            flex-shrink: 0;
            font-size: 16px;
        }

        .message-content {
            padding: 16px;
            border-radius: 18px;
            background: var(--bg-message);
            position: relative;
            max-width: 100%;
            word-break: break-word;
            box-shadow: 0 2px 8px var(--shadow);
        }

        .message.own .message-content {
            background: var(--bg-own);
            border-bottom-right-radius: 4px;
        }

        .message:not(.own) .message-content {
            border-bottom-left-radius: 4px;
        }

        .message-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }

        .message-sender {
            font-weight: 700;
            font-size: 14px;
            color: var(--primary);
        }

        .message-time {
            font-size: 11px;
            color: var(--text-secondary);
        }

        .message-text {
            line-height: 1.5;
            font-size: 15px;
        }

        /* –í–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è */
        .message-input-container {
            padding: 20px 24px;
            border-top: 1px solid var(--border);
            background: var(--bg-sidebar);
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .message-input {
            flex: 1;
            padding: 16px 20px;
            border: 2px solid transparent;
            border-radius: 25px;
            background: var(--bg-message);
            color: var(--text-main);
            font-size: 15px;
            transition: all 0.2s;
            resize: none;
            height: 50px;
            max-height: 120px;
        }

        .message-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
        }

        .input-actions {
            display: flex;
            gap: 8px;
        }

        .send-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            transition: all 0.2s;
        }

        .send-btn:hover {
            transform: scale(1.1) rotate(90deg);
            box-shadow: 0 6px 20px rgba(67, 97, 238, 0.4);
        }

        /* –ü–∞–Ω–µ–ª—å –∑–≤–æ–Ω–∫–∞ */
        .call-panel {
            width: 350px;
            background: var(--bg-sidebar);
            border-left: 1px solid var(--border);
            display: none;
            flex-direction: column;
        }

        .call-panel.active {
            display: flex;
        }

        .call-header {
            padding: 24px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            text-align: center;
        }

        .call-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .call-subtitle {
            font-size: 14px;
            opacity: 0.9;
        }

        .call-content {
            flex: 1;
            padding: 24px;
            overflow-y: auto;
        }

        .call-user {
            text-align: center;
            margin-bottom: 32px;
        }

        .call-user-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 48px;
            font-weight: bold;
            margin: 0 auto 16px;
            border: 4px solid var(--bg-main);
        }

        .call-user-name {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .call-status {
            font-size: 14px;
            color: var(--text-secondary);
        }

        .call-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 40px;
        }

        .call-control-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            transition: all 0.2s;
        }

        .call-accept {
            background: var(--success);
            color: white;
            box-shadow: 0 4px 15px rgba(76, 201, 240, 0.3);
        }

        .call-reject {
            background: var(--danger);
            color: white;
            box-shadow: 0 4px 15px rgba(247, 37, 133, 0.3);
        }

        .call-end {
            background: var(--danger);
            color: white;
            box-shadow: 0 4px 15px rgba(247, 37, 133, 0.3);
        }

        .call-control-btn:hover {
            transform: scale(1.1);
        }

        .device-settings {
            margin-top: 40px;
            padding: 20px;
            background: var(--bg-message);
            border-radius: 16px;
        }

        .device-settings h4 {
            margin-bottom: 16px;
            font-size: 16px;
            font-weight: 600;
        }

        .device-select {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border);
            border-radius: 12px;
            background: var(--bg-main);
            color: var(--text-main);
            margin-bottom: 12px;
            font-size: 14px;
        }

        /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
            animation: fadeIn 0.3s ease;
        }

        .modal {
            background: var(--bg-main);
            border-radius: 20px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .modal-header {
            padding: 24px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
        }

        .modal-header h3 {
            font-size: 20px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .modal-content {
            padding: 24px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            font-size: 14px;
        }

        .form-control {
            width: 100%;
            padding: 14px;
            border: 2px solid var(--border);
            border-radius: 12px;
            background: var(--bg-message);
            color: var(--text-main);
            font-size: 15px;
            transition: all 0.2s;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
        }

        .modal-actions {
            display: flex;
            gap: 12px;
            margin-top: 24px;
        }

        .btn {
            flex: 1;
            padding: 14px;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 15px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
        }

        .btn-secondary {
            background: var(--bg-message);
            color: var(--text-main);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px var(--shadow);
        }

        /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 16px 24px;
            background: var(--bg-sidebar);
            color: var(--text-main);
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            z-index: 1001;
            display: flex;
            align-items: center;
            gap: 12px;
            transform: translateX(400px);
            transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            max-width: 350px;
            border-left: 4px solid var(--primary);
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            border-left-color: var(--success);
        }

        .notification.error {
            border-left-color: var(--danger);
        }

        .notification.warning {
            border-left-color: var(--warning);
        }

        .notification-icon {
            font-size: 20px;
        }

        /* –ü—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary);
        }

        .empty-icon {
            font-size: 64px;
            margin-bottom: 24px;
            opacity: 0.5;
        }

        .empty-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 12px;
            color: var(--text-main);
        }

        .empty-text {
            font-size: 16px;
            line-height: 1.6;
            max-width: 400px;
            margin: 0 auto;
        }

        /* –ö–æ–º–Ω–∞—Ç–∞ */
        .room-info {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-top: 8px;
        }

        .room-id {
            background: rgba(255, 255, 255, 0.2);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-family: monospace;
            cursor: pointer;
            transition: all 0.2s;
        }

        .room-id:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        /* –°–≤–∏—Ç—á —Ç–µ–º—ã */
        .theme-switch {
            position: fixed;
            bottom: 24px;
            left: 24px;
            z-index: 100;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            transition: .4s;
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider:before {
            transform: translateX(30px);
        }

        /* –ê–Ω–∏–º–∞—Ü–∏—è –∑–≤–æ–Ω–∫–∞ */
        .ringing-animation {
            animation: ringing 1.5s infinite;
        }

        @keyframes ringing {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* –ö–∞—Å—Ç–æ–º–Ω—ã–π —Å–∫—Ä–æ–ª–ª–±–∞—Ä */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-message);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-dark);
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
        <div class="sidebar">
            <!-- –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
            <div class="user-profile">
                <div class="user-avatar" id="userAvatar">–ì1</div>
                <div class="user-details">
                    <div class="user-name">
                        <span id="userName">–ì–æ—Å—Ç—å-1</span>
                        <button class="edit-name-btn" id="editNameBtn">
                            <i class="fas fa-edit"></i>
                        </button>
                    </div>
                    <div class="user-status">
                        <span class="status-dot"></span>
                        <span id="userStatus">–í —Å–µ—Ç–∏</span>
                    </div>
                    <div class="room-info">
                        <div class="room-id" id="roomId">ID: ...</div>
                        <button class="action-btn" id="copyRoomBtn" style="width: 30px; height: 30px; font-size: 12px;">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- –ö–∞–Ω–∞–ª—ã -->
            <div class="channels-section">
                <div class="channels-list">
                    <div class="section-title">
                        <i class="fas fa-hashtag"></i>
                        <span>–ö–∞–Ω–∞–ª—ã</span>
                    </div>
                    <div class="channel-item active" data-channel="general">
                        <i class="fas fa-globe channel-icon"></i>
                        <span>–û–±—â–∏–π —á–∞—Ç</span>
                    </div>
                    <div class="channel-item" data-channel="voice">
                        <i class="fas fa-microphone channel-icon"></i>
                        <span>–ì–æ–ª–æ—Å–æ–≤–æ–π —á–∞—Ç</span>
                    </div>
                </div>

                <!-- –ö–æ–Ω—Ç–∞–∫—Ç—ã -->
                <div class="users-list">
                    <div class="section-title">
                        <i class="fas fa-users"></i>
                        <span>–ö–æ–Ω—Ç–∞–∫—Ç—ã (0)</span>
                        <button class="action-btn" id="addContactBtn" style="margin-left: auto; width: 24px; height: 24px;">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                    <div id="contactsList">
                        <div class="empty-contacts">
                            <i class="fas fa-user-plus" style="font-size: 24px; margin-bottom: 10px; opacity: 0.5;"></i>
                            <p>–ö–æ–Ω—Ç–∞–∫—Ç–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</p>
                            <p style="font-size: 12px; margin-top: 8px;">–î–æ–±–∞–≤—å—Ç–µ –¥—Ä—É–∑–µ–π, —á—Ç–æ–±—ã –æ–±—â–∞—Ç—å—Å—è –≤ –õ–°</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –ì–æ–ª–æ—Å–æ–≤–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ -->
            <div class="voice-controls">
                <button class="voice-btn connect-voice" id="connectVoice">
                    <i class="fas fa-microphone"></i>
                    <span>–í–∫–ª—é—á–∏—Ç—å –º–∏–∫—Ä–æ—Ñ–æ–Ω</span>
                </button>
                <button class="voice-btn disconnect-voice" id="disconnectVoice" disabled>
                    <i class="fas fa-microphone-slash"></i>
                    <span>–í—ã–∫–ª—é—á–∏—Ç—å –º–∏–∫—Ä–æ—Ñ–æ–Ω</span>
                </button>
                <div class="voice-indicator" id="voiceIndicator">
                    <i class="fas fa-circle"></i>
                    <span>–ú–∏–∫—Ä–æ—Ñ–æ–Ω –∞–∫—Ç–∏–≤–µ–Ω</span>
                </div>
            </div>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π —á–∞—Ç -->
        <div class="chat-main">
            <!-- –®–∞–ø–∫–∞ —á–∞—Ç–∞ -->
            <div class="chat-header">
                <div class="chat-info">
                    <h2 id="currentChatName">–û–±—â–∏–π —á–∞—Ç</h2>
                    <div class="chat-type-badge" id="chatTypeBadge">–¢–µ–∫—Å—Ç</div>
                </div>
                <div class="chat-actions">
                    <button class="action-btn" id="startCallBtn" title="–ù–∞—á–∞—Ç—å –∑–≤–æ–Ω–æ–∫" style="display: none;">
                        <i class="fas fa-phone"></i>
                    </button>
                    <button class="action-btn" id="videoCallBtn" title="–í–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫" style="display: none;">
                        <i class="fas fa-video"></i>
                    </button>
                    <button class="action-btn" id="inviteFriendBtn" title="–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–≥–∞">
                        <i class="fas fa-user-plus"></i>
                    </button>
                </div>
            </div>

            <!-- –°–æ–æ–±—â–µ–Ω–∏—è -->
            <div class="messages-container" id="messagesContainer">
                <div class="empty-state">
                    <div class="empty-icon">
                        <i class="fas fa-comments"></i>
                    </div>
                    <div class="empty-title">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ NeonChat!</div>
                    <div class="empty-text">
                        –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–º–Ω–∞—Ç—É –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ ID –¥—Ä—É–∑—å—è–º, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –æ–±—â–µ–Ω–∏–µ.
                        –î–æ–±–∞–≤–ª—è–π—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –∑–≤–æ–Ω–∫–æ–≤.
                    </div>
                </div>
            </div>

            <!-- –í–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è -->
            <div class="message-input-container">
                <textarea class="message-input" id="messageInput" 
                          placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." 
                          rows="1"></textarea>
                <div class="input-actions">
                    <button class="send-btn" id="sendBtn">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- –ü–∞–Ω–µ–ª—å –∑–≤–æ–Ω–∫–∞ -->
        <div class="call-panel" id="callPanel">
            <div class="call-header">
                <div class="call-title" id="callTitle">–ó–≤–æ–Ω–æ–∫</div>
                <div class="call-subtitle" id="callSubtitle">–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...</div>
            </div>
            <div class="call-content">
                <div class="call-user">
                    <div class="call-user-avatar" id="callUserAvatar">?</div>
                    <div class="call-user-name" id="callUserName">...</div>
                    <div class="call-status" id="callStatus">–ó–≤–æ–Ω–æ–∫...</div>
                </div>
                
                <div class="call-controls">
                    <button class="call-control-btn call-accept" id="acceptCallBtn" style="display: none;">
                        <i class="fas fa-phone"></i>
                    </button>
                    <button class="call-control-btn call-reject" id="rejectCallBtn">
                        <i class="fas fa-phone-slash"></i>
                    </button>
                    <button class="call-control-btn call-end" id="endCallBtn" style="display: none;">
                        <i class="fas fa-phone-slash"></i>
                    </button>
                </div>

                <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ -->
                <div class="device-settings">
                    <h4>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤</h4>
                    <select class="device-select" id="audioInputSelect">
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –º–∏–∫—Ä–æ—Ñ–æ–Ω</option>
                    </select>
                    <select class="device-select" id="audioOutputSelect">
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –¥–∏–Ω–∞–º–∏–∫–∏</option>
                    </select>
                    <button class="btn btn-secondary" id="testAudioBtn">
                        <i class="fas fa-volume-up"></i> –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–≤—É–∫
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–º–µ–Ω–∏ -->
    <div class="modal-overlay" id="editNameModal" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3><i class="fas fa-edit"></i> –ò–∑–º–µ–Ω–∏—Ç—å –∏–º—è</h3>
            </div>
            <div class="modal-content">
                <div class="form-group">
                    <label>–í–∞—à–µ –∏–º—è</label>
                    <input type="text" class="form-control" id="newNameInput" 
                           value="–ì–æ—Å—Ç—å-1" maxlength="20">
                    <small style="color: var(--text-secondary); font-size: 12px;">
                        –ë–∞–∑–æ–≤–æ–µ –∏–º—è "–ì–æ—Å—Ç—å-1" –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
                    </small>
                </div>
                <div class="modal-actions">
                    <button class="btn btn-secondary" id="cancelEditNameBtn">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn btn-primary" id="saveNameBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–∞–∫—Ç–∞ -->
    <div class="modal-overlay" id="addContactModal" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3><i class="fas fa-user-plus"></i> –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç</h3>
            </div>
            <div class="modal-content">
                <div class="form-group">
                    <label>ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                    <input type="number" class="form-control" id="contactIdInput" 
                           placeholder="–í–≤–µ–¥–∏—Ç–µ ID –¥—Ä—É–≥–∞" min="1" max="999999">
                    <small style="color: var(--text-secondary); font-size: 12px;">
                        ID –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å —É –¥—Ä—É–≥–∞ –≤ –µ–≥–æ –ø—Ä–æ—Ñ–∏–ª–µ
                    </small>
                </div>
                <div class="modal-actions">
                    <button class="btn btn-secondary" id="cancelAddContactBtn">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn btn-primary" id="saveContactBtn">–î–æ–±–∞–≤–∏—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è -->
    <div class="modal-overlay" id="inviteModal" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3><i class="fas fa-share-alt"></i> –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–≥–∞</h3>
            </div>
            <div class="modal-content">
                <div class="form-group">
                    <label>ID –≤–∞—à–µ–π –∫–æ–º–Ω–∞—Ç—ã</label>
                    <div style="display: flex; gap: 8px;">
                        <input type="text" class="form-control" id="roomIdInput" readonly
                               style="font-family: monospace; font-weight: bold;">
                        <button class="btn btn-primary" id="copyInviteBtn" style="flex: 0 0 auto;">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                </div>
                <div class="form-group">
                    <label>–°—Å—ã–ª–∫–∞ –¥–ª—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è</label>
                    <textarea class="form-control" id="inviteLink" rows="2" readonly
                              style="font-size: 14px; resize: none;"></textarea>
                </div>
                <div class="modal-actions">
                    <button class="btn btn-secondary" id="closeInviteBtn">–ó–∞–∫—Ä—ã—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ -->
    <div class="notification" id="notification">
        <i class="fas fa-info-circle notification-icon"></i>
        <span id="notificationText">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ NeonChat!</span>
    </div>

    <!-- –°–≤–∏—Ç—á —Ç–µ–º—ã -->
    <div class="theme-switch">
        <label class="switch">
            <input type="checkbox" id="themeToggle">
            <span class="slider"></span>
        </label>
    </div>

    <script>
        // –û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ - –¢–û–õ–¨–ö–û –¢–ï–ö–£–©–ò–ô –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨
        let currentUser = {
            id: 1,
            baseName: "–ì–æ—Å—Ç—å-1",
            displayName: "–ì–æ—Å—Ç—å-1",
            avatar: "–ì1",
            status: "online",
            isTalking: false,
            stream: null
        };

        let contacts = []; // –ü–£–°–¢–û–ô —Å–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
        let currentChat = "general";
        let currentCall = null;
        let localStream = null;
        let peerConnections = {};
        let mediaDevices = [];
        let audioContext = null;
        let analyser = null;
        let isVoiceActive = false;
        let roomId = generateRoomId();

        // DOM —ç–ª–µ–º–µ–Ω—Ç—ã
        const themeToggle = document.getElementById('themeToggle');
        const userAvatar = document.getElementById('userAvatar');
        const userName = document.getElementById('userName');
        const userStatus = document.getElementById('userStatus');
        const roomIdElement = document.getElementById('roomId');
        const copyRoomBtn = document.getElementById('copyRoomBtn');
        const editNameBtn = document.getElementById('editNameBtn');
        const connectVoiceBtn = document.getElementById('connectVoice');
        const disconnectVoiceBtn = document.getElementById('disconnectVoice');
        const voiceIndicator = document.getElementById('voiceIndicator');
        const contactsList = document.getElementById('contactsList');
        const messagesContainer = document.getElementById('messagesContainer');
        const messageInput = document.getElementById('messageInput');
        const sendBtn = document.getElementById('sendBtn');
        const currentChatName = document.getElementById('currentChatName');
        const chatTypeBadge = document.getElementById('chatTypeBadge');
        const startCallBtn = document.getElementById('startCallBtn');
        const videoCallBtn = document.getElementById('videoCallBtn');
        const inviteFriendBtn = document.getElementById('inviteFriendBtn');
        const callPanel = document.getElementById('callPanel');
        const callTitle = document.getElementById('callTitle');
        const callSubtitle = document.getElementById('callSubtitle');
        const callUserAvatar = document.getElementById('callUserAvatar');
        const callUserName = document.getElementById('callUserName');
        const callStatus = document.getElementById('callStatus');
        const acceptCallBtn = document.getElementById('acceptCallBtn');
        const rejectCallBtn = document.getElementById('rejectCallBtn');
        const endCallBtn = document.getElementById('endCallBtn');
        const audioInputSelect = document.getElementById('audioInputSelect');
        const audioOutputSelect = document.getElementById('audioOutputSelect');
        const testAudioBtn = document.getElementById('testAudioBtn');
        const addContactBtn = document.getElementById('addContactBtn');
        const notification = document.getElementById('notification');
        const notificationText = document.getElementById('notificationText');

        // –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
        const editNameModal = document.getElementById('editNameModal');
        const newNameInput = document.getElementById('newNameInput');
        const cancelEditNameBtn = document.getElementById('cancelEditNameBtn');
        const saveNameBtn = document.getElementById('saveNameBtn');

        const addContactModal = document.getElementById('addContactModal');
        const contactIdInput = document.getElementById('contactIdInput');
        const cancelAddContactBtn = document.getElementById('cancelAddContactBtn');
        const saveContactBtn = document.getElementById('saveContactBtn');

        const inviteModal = document.getElementById('inviteModal');
        const roomIdInput = document.getElementById('roomIdInput');
        const inviteLink = document.getElementById('inviteLink');
        const copyInviteBtn = document.getElementById('copyInviteBtn');
        const closeInviteBtn = document.getElementById('closeInviteBtn');

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', async function() {
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º ID –∫–æ–º–Ω–∞—Ç—ã
            roomIdElement.textContent = `ID: ${roomId}`;
            roomIdInput.value = roomId;
            inviteLink.value = `${window.location.origin}${window.location.pathname}?room=${roomId}`;
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
            loadSettings();
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–Ω—Ç–∞–∫—Ç—ã (–±—É–¥—É—Ç –ø—É—Å—Ç—ã–µ)
            loadContacts();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
            updateDeviceList();
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–∞–Ω–∞–ª–æ–≤
            document.querySelectorAll('.channel-item').forEach(item => {
                item.addEventListener('click', function() {
                    document.querySelectorAll('.channel-item').forEach(i => i.classList.remove('active'));
                    this.classList.add('active');
                    switchChannel(this.dataset.channel);
                });
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
            showNotification("–°–æ–∑–¥–∞–Ω–∞ –∫–æ–º–Ω–∞—Ç–∞! –û—Ç–ø—Ä–∞–≤—å—Ç–µ ID –¥—Ä—É–∑—å—è–º", "success");
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–∏—Å—Ç–µ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç
            setTimeout(() => {
                addSystemMessage("üì¢ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ NeonChat!");
                addSystemMessage("üìû –î–ª—è –∑–≤–æ–Ω–∫–æ–≤ –¥–æ–±–∞–≤—å—Ç–µ –¥—Ä—É–∑–µ–π –≤ –∫–æ–Ω—Ç–∞–∫—Ç—ã");
                addSystemMessage("üîó ID –≤–∞—à–µ–π –∫–æ–º–Ω–∞—Ç—ã: " + roomId);
            }, 1000);
        });

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è ID –∫–æ–º–Ω–∞—Ç—ã
        function generateRoomId() {
            const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
            let id = '';
            for (let i = 0; i < 6; i++) {
                id += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return id;
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
        function loadSettings() {
            const theme = localStorage.getItem('neonchat_theme') || 'light';
            themeToggle.checked = theme === 'dark';
            document.body.classList.toggle('dark-theme', theme === 'dark');
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
        function loadContacts() {
            const saved = localStorage.getItem('neonchat_contacts');
            if (saved) {
                contacts = JSON.parse(saved);
                updateContactsList();
            }
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
        function saveContacts() {
            localStorage.setItem('neonchat_contacts', JSON.stringify(contacts));
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
        function updateContactsList() {
            const contactsTitle = document.querySelector('.users-list .section-title span');
            contactsTitle.textContent = `–ö–æ–Ω—Ç–∞–∫—Ç—ã (${contacts.length})`;
            
            if (contacts.length === 0) {
                contactsList.innerHTML = `
                    <div class="empty-contacts">
                        <i class="fas fa-user-plus" style="font-size: 24px; margin-bottom: 10px; opacity: 0.5;"></i>
                        <p>–ö–æ–Ω—Ç–∞–∫—Ç–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</p>
                        <p style="font-size: 12px; margin-top: 8px;">–î–æ–±–∞–≤—å—Ç–µ –¥—Ä—É–∑–µ–π, —á—Ç–æ–±—ã –æ–±—â–∞—Ç—å—Å—è –≤ –õ–°</p>
                    </div>
                `;
                return;
            }
            
            contactsList.innerHTML = '';
            
            contacts.forEach(contact => {
                const statusColors = {
                    online: "var(--online)",
                    idle: "var(--idle)",
                    offline: "var(--offline)"
                };
                
                const statusTexts = {
                    online: "–í —Å–µ—Ç–∏",
                    idle: "–ù–µ –∞–∫—Ç–∏–≤–µ–Ω",
                    offline: "–ù–µ –≤ —Å–µ—Ç–∏"
                };
                
                const userItem = document.createElement('div');
                userItem.className = 'user-item';
                userItem.dataset.contactId = contact.id;
                userItem.innerHTML = `
                    <div class="user-avatar-small" style="background: ${statusColors[contact.status] || 'var(--gray)'}">
                        ${contact.avatar}
                    </div>
                    <div class="user-info">
                        <div class="user-item-name">${contact.name}</div>
                        <div class="user-item-status">${statusTexts[contact.status] || '–ù–µ –≤ —Å–µ—Ç–∏'}</div>
                    </div>
                `;
                
                userItem.addEventListener('click', () => openPrivateChat(contact));
                contactsList.appendChild(userItem);
            });
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
        async function updateDeviceList() {
            try {
                const devices = await navigator.mediaDevices.enumerateDevices();
                mediaDevices = devices;
                
                // –ú–∏–∫—Ä–æ—Ñ–æ–Ω—ã
                audioInputSelect.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –º–∏–∫—Ä–æ—Ñ–æ–Ω</option>';
                const audioInputs = devices.filter(d => d.kind === 'audioinput');
                audioInputs.forEach(device => {
                    const option = document.createElement('option');
                    option.value = device.deviceId;
                    option.textContent = device.label || `–ú–∏–∫—Ä–æ—Ñ–æ–Ω ${audioInputSelect.options.length}`;
                    audioInputSelect.appendChild(option);
                });
                
                // –î–∏–Ω–∞–º–∏–∫–∏
                audioOutputSelect.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –¥–∏–Ω–∞–º–∏–∫–∏</option>';
                const audioOutputs = devices.filter(d => d.kind === 'audiooutput');
                audioOutputs.forEach(device => {
                    const option = document.createElement('option');
                    option.value = device.deviceId;
                    option.textContent = device.label || `–î–∏–Ω–∞–º–∏–∫–∏ ${audioOutputSelect.options.length}`;
                    audioOutputSelect.appendChild(option);
                });
            } catch (error) {
                console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤:", error);
            }
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–∞
        function switchChannel(channelId) {
            currentChat = channelId;
            
            switch(channelId) {
                case 'general':
                    currentChatName.textContent = "–û–±—â–∏–π —á–∞—Ç";
                    chatTypeBadge.textContent = "–¢–µ–∫—Å—Ç";
                    startCallBtn.style.display = 'none';
                    videoCallBtn.style.display = 'none';
                    break;
                case 'voice':
                    currentChatName.textContent = "–ì–æ–ª–æ—Å–æ–≤–æ–π —á–∞—Ç";
                    chatTypeBadge.textContent = "–ì–æ–ª–æ—Å";
                    startCallBtn.style.display = 'none';
                    videoCallBtn.style.display = 'none';
                    break;
            }
            
            // –û—á–∏—â–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è
            messagesContainer.innerHTML = `
                <div class="empty-state">
                    <div class="empty-icon">
                        <i class="fas fa-${channelId === 'voice' ? 'microphone' : 'comments'}"></i>
                    </div>
                    <div class="empty-title">${currentChatName.textContent}</div>
                    <div class="empty-text">
                        ${channelId === 'voice' 
                            ? '–ü–æ–¥–∫–ª—é—á–∏—Ç–µ –º–∏–∫—Ä–æ—Ñ–æ–Ω –¥–ª—è –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –æ–±—â–µ–Ω–∏—è' 
                            : '–ù–∞—á–Ω–∏—Ç–µ –æ–±—â–µ–Ω–∏–µ –≤ —ç—Ç–æ–º —á–∞—Ç–µ'}
                    </div>
                </div>
            `;
        }

        // –û—Ç–∫—Ä—ã—Ç–∏–µ –ª–∏—á–Ω–æ–≥–æ —á–∞—Ç–∞
        function openPrivateChat(contact) {
            currentChat = `private_${contact.id}`;
            currentChatName.textContent = contact.name;
            chatTypeBadge.textContent = "–õ–∏—á–Ω—ã–π";
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫–∏ –∑–≤–æ–Ω–∫–∞
            startCallBtn.style.display = 'block';
            videoCallBtn.style.display = 'block';
            
            messagesContainer.innerHTML = `
                <div class="empty-state">
                    <div class="empty-icon">
                        <i class="fas fa-user-friends"></i>
                    </div>
                    <div class="empty-title">${contact.name}</div>
                    <div class="empty-text">
                        –õ–∏—á–Ω—ã–π —á–∞—Ç —Å ${contact.name}. 
                        –ú–æ–∂–µ—Ç–µ –ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –∏ —Å–æ–≤–µ—Ä—à–∞—Ç—å –∑–≤–æ–Ω–∫–∏.
                    </div>
                </div>
            `;
        }

        // –í–∫–ª—é—á–µ–Ω–∏–µ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
        async function startVoiceChat() {
            try {
                const constraints = {
                    audio: {
                        echoCancellation: true,
                        noiseSuppression: true,
                        autoGainControl: true,
                        deviceId: audioInputSelect.value ? { exact: audioInputSelect.value } : undefined
                    }
                };
                
                localStream = await navigator.mediaDevices.getUserMedia(constraints);
                
                // –ù–∞—á–∏–Ω–∞–µ–º –∞–Ω–∞–ª–∏–∑ –∞—É–¥–∏–æ
                startAudioAnalysis(localStream);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º UI
                connectVoiceBtn.disabled = true;
                disconnectVoiceBtn.disabled = false;
                voiceIndicator.style.display = 'flex';
                userStatus.textContent = "–ì–æ–≤–æ—Ä–∏—Ç";
                userAvatar.classList.add('user-talking');
                
                isVoiceActive = true;
                
                showNotification("–ú–∏–∫—Ä–æ—Ñ–æ–Ω –≤–∫–ª—é—á–µ–Ω üé§", "success");
                playSound('connect');
                
                // –ï—Å–ª–∏ –≤ –≥–æ–ª–æ—Å–æ–≤–æ–º —á–∞—Ç–µ, –¥–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
                if (currentChat === 'voice') {
                    addSystemMessage("üé§ –í—ã –ø–æ–¥–∫–ª—é—á–∏–ª–∏—Å—å –∫ –≥–æ–ª–æ—Å–æ–≤–æ–º—É —á–∞—Ç—É");
                }
                
            } catch (error) {
                console.error("–û—à–∏–±–∫–∞ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞:", error);
                showNotification("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å –º–∏–∫—Ä–æ—Ñ–æ–Ω", "error");
            }
        }

        // –í—ã–∫–ª—é—á–µ–Ω–∏–µ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
        function stopVoiceChat() {
            if (localStream) {
                localStream.getTracks().forEach(track => track.stop());
                localStream = null;
            }
            
            if (audioContext) {
                audioContext.close();
                audioContext = null;
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º UI
            connectVoiceBtn.disabled = false;
            disconnectVoiceBtn.disabled = true;
            voiceIndicator.style.display = 'none';
            userStatus.textContent = "–í —Å–µ—Ç–∏";
            userAvatar.classList.remove('user-talking');
            
            isVoiceActive = false;
            
            showNotification("–ú–∏–∫—Ä–æ—Ñ–æ–Ω –≤—ã–∫–ª—é—á–µ–Ω", "warning");
            playSound('disconnect');
            
            // –ï—Å–ª–∏ –≤ –≥–æ–ª–æ—Å–æ–≤–æ–º —á–∞—Ç–µ, –¥–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
            if (currentChat === 'voice') {
                addSystemMessage("üîá –í—ã –æ—Ç–∫–ª—é—á–∏–ª–∏—Å—å –æ—Ç –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ —á–∞—Ç–∞");
            }
        }

        // –ê–Ω–∞–ª–∏–∑ –∞—É–¥–∏–æ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
        function startAudioAnalysis(stream) {
            audioContext = new (window.AudioContext || window.webkitAudioContext)();
            analyser = audioContext.createAnalyser();
            const source = audioContext.createMediaStreamSource(stream);
            source.connect(analyser);
            
            analyser.fftSize = 256;
            const bufferLength = analyser.frequencyBinCount;
            const dataArray = new Uint8Array(bufferLength);
            
            function checkAudioLevel() {
                if (!analyser || !isVoiceActive) return;
                
                analyser.getByteFrequencyData(dataArray);
                let sum = 0;
                for (let i = 0; i < bufferLength; i++) {
                    sum += dataArray[i];
                }
                const average = sum / bufferLength;
                
                const isSpeaking = average > 10;
                if (isSpeaking !== currentUser.isTalking) {
                    currentUser.isTalking = isSpeaking;
                    userAvatar.classList.toggle('user-talking', isSpeaking);
                }
                
                requestAnimationFrame(checkAudioLevel);
            }
            
            checkAudioLevel();
        }

        // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
        function sendMessage() {
            const text = messageInput.value.trim();
            if (!text) return;
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
            addMessage(currentUser.displayName, text, true, currentUser.avatar);
            
            // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞
            messageInput.value = '';
            messageInput.style.height = 'auto';
            
            // –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º –∑–≤—É–∫
            playSound('message');
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç
        function addMessage(sender, text, isOwn = false, avatar = null) {
            // –£–±–∏—Ä–∞–µ–º –ø—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            const emptyState = messagesContainer.querySelector('.empty-state');
            if (emptyState) {
                emptyState.remove();
            }
            
            const message = document.createElement('div');
            message.className = `message ${isOwn ? 'own' : ''}`;
            
            const time = new Date();
            const timeString = time.getHours().toString().padStart(2, '0') + ':' + 
                              time.getMinutes().toString().padStart(2, '0');
            
            const avatarText = avatar || sender.substring(0, 2);
            
            message.innerHTML = `
                <div class="message-avatar">${avatarText}</div>
                <div class="message-content">
                    <div class="message-header">
                        <div class="message-sender">${sender}</div>
                        <div class="message-time">${timeString}</div>
                    </div>
                    <div class="message-text">${text}</div>
                </div>
            `;
            
            messagesContainer.appendChild(message);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
        function addSystemMessage(text) {
            const message = document.createElement('div');
            message.className = 'message message-system';
            message.innerHTML = `<div class="message-content">${text}</div>`;
            messagesContainer.appendChild(message);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // –ù–∞—á–∞–ª–æ –∑–≤–æ–Ω–∫–∞
        function startCall(isVideo = false) {
            if (!currentChat.startsWith('private_')) {
                showNotification("–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç –¥–ª—è –∑–≤–æ–Ω–∫–∞", "warning");
                return;
            }
            
            const contactId = parseInt(currentChat.split('_')[1]);
            const contact = contacts.find(c => c.id === contactId);
            
            if (!contact) {
                showNotification("–ö–æ–Ω—Ç–∞–∫—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω", "error");
                return;
            }
            
            if (contact.status !== 'online') {
                showNotification(`${contact.name} –Ω–µ –≤ —Å–µ—Ç–∏`, "warning");
                return;
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–∞–Ω–µ–ª—å –∑–≤–æ–Ω–∫–∞
            callPanel.classList.add('active');
            callTitle.textContent = isVideo ? "–í–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫" : "–ó–≤–æ–Ω–æ–∫";
            callSubtitle.textContent = `–ó–≤–æ–Ω–æ–∫ ${contact.name}`;
            callUserName.textContent = contact.name;
            callUserAvatar.textContent = contact.avatar;
            callStatus.textContent = "–í—ã–∑—ã–≤–∞–µ–º...";
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—ã–µ –∫–Ω–æ–ø–∫–∏
            acceptCallBtn.style.display = 'none';
            rejectCallBtn.style.display = 'block';
            endCallBtn.style.display = 'none';
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –∑–≤–æ–Ω–∫–∞
            callUserAvatar.classList.add('ringing-animation');
            
            // –°–∏–º—É–ª—è—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –∑–≤–æ–Ω–æ–∫ (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç WebRTC)
            setTimeout(() => {
                if (Math.random() > 0.3) { // 70% –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞
                    callStatus.textContent = "–†–∞–∑–≥–æ–≤–æ—Ä...";
                    callUserAvatar.classList.remove('ringing-animation');
                    rejectCallBtn.style.display = 'none';
                    endCallBtn.style.display = 'block';
                    
                    // –í–∫–ª—é—á–∞–µ–º –º–∏–∫—Ä–æ—Ñ–æ–Ω –µ—Å–ª–∏ –Ω–µ –≤–∫–ª—é—á–µ–Ω
                    if (!isVoiceActive) {
                        startVoiceChat();
                    }
                    
                    showNotification(`${contact.name} –æ—Ç–≤–µ—Ç–∏–ª –Ω–∞ –∑–≤–æ–Ω–æ–∫`, "success");
                    addSystemMessage(`üìû –ù–∞—á–∞—Ç –∑–≤–æ–Ω–æ–∫ —Å ${contact.name}`);
                } else {
                    endCall();
                    showNotification(`${contact.name} –Ω–µ –æ—Ç–≤–µ—Ç–∏–ª`, "warning");
                }
            }, 3000);
        }

        // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–∞
        function endCall() {
            callPanel.classList.remove('active');
            callUserAvatar.classList.remove('ringing-animation');
            
            showNotification("–ó–≤–æ–Ω–æ–∫ –∑–∞–≤–µ—Ä—à–µ–Ω", "info");
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–∏—Å—Ç–µ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
            if (currentChat.startsWith('private_')) {
                const contactId = parseInt(currentChat.split('_')[1]);
                const contact = contacts.find(c => c.id === contactId);
                if (contact) {
                    addSystemMessage(`üìû –ó–≤–æ–Ω–æ–∫ —Å ${contact.name} –∑–∞–≤–µ—Ä—à–µ–Ω`);
                }
            }
        }

        // –ü—Ä–∏–Ω—è—Ç–∏–µ –≤—Ö–æ–¥—è—â–µ–≥–æ –∑–≤–æ–Ω–∫–∞
        function acceptCall() {
            callStatus.textContent = "–†–∞–∑–≥–æ–≤–æ—Ä...";
            callUserAvatar.classList.remove('ringing-animation');
            acceptCallBtn.style.display = 'none';
            endCallBtn.style.display = 'block';
            
            // –í–∫–ª—é—á–∞–µ–º –º–∏–∫—Ä–æ—Ñ–æ–Ω –µ—Å–ª–∏ –Ω–µ –≤–∫–ª—é—á–µ–Ω
            if (!isVoiceActive) {
                startVoiceChat();
            }
            
            showNotification("–í—ã –ø—Ä–∏–Ω—è–ª–∏ –∑–≤–æ–Ω–æ–∫", "success");
        }

        // –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–≤—É–∫–æ–≤
        function playSound(type) {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                switch(type) {
                    case 'message':
                        oscillator.frequency.value = 800;
                        gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                        oscillator.start(audioContext.currentTime);
                        oscillator.stop(audioContext.currentTime + 0.3);
                        break;
                    case 'connect':
                        oscillator.frequency.setValueAtTime(400, audioContext.currentTime);
                        oscillator.frequency.exponentialRampToValueAtTime(800, audioContext.currentTime + 0.5);
                        gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
                        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                        oscillator.start(audioContext.currentTime);
                        oscillator.stop(audioContext.currentTime + 0.5);
                        break;
                    case 'disconnect':
                        oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
                        oscillator.frequency.exponentialRampToValueAtTime(400, audioContext.currentTime + 0.5);
                        gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
                        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                        oscillator.start(audioContext.currentTime);
                        oscillator.stop(audioContext.currentTime + 0.5);
                        break;
                }
            } catch (e) {
                console.log("–ê—É–¥–∏–æ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è");
            }
        }

        // –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–≤—É–∫–∞
        function testAudio() {
            const audio = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-correct-answer-tone-2870.mp3');
            audio.play();
            showNotification("–¢–µ—Å—Ç–æ–≤—ã–π –∑–≤—É–∫ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω", "success");
        }

        // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ ID –∫–æ–º–Ω–∞—Ç—ã
        function copyRoomId() {
            navigator.clipboard.writeText(roomId).then(() => {
                showNotification("ID –∫–æ–º–Ω–∞—Ç—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω", "success");
            }).catch(() => {
                const temp = document.createElement('textarea');
                temp.value = roomId;
                document.body.appendChild(temp);
                temp.select();
                document.execCommand('copy');
                document.body.removeChild(temp);
                showNotification("ID –∫–æ–º–Ω–∞—Ç—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω", "success");
            });
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        function showNotification(text, type = "info") {
            notificationText.textContent = text;
            notification.className = `notification ${type} show`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 4000);
            
            playSound('message');
        }

        // –°–æ–±—ã—Ç–∏—è

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã
        themeToggle.addEventListener('change', function() {
            const isDark = this.checked;
            document.body.classList.toggle('dark-theme', isDark);
            localStorage.setItem('neonchat_theme', isDark ? 'dark' : 'light');
            showNotification(isDark ? "–¢–µ–º–Ω–∞—è —Ç–µ–º–∞ –≤–∫–ª—é—á–µ–Ω–∞" : "–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ –≤–∫–ª—é—á–µ–Ω–∞", "success");
        });

        // –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–º–µ–Ω–∏
        editNameBtn.addEventListener('click', () => {
            newNameInput.value = currentUser.displayName;
            editNameModal.style.display = 'flex';
        });

        cancelEditNameBtn.addEventListener('click', () => {
            editNameModal.style.display = 'none';
        });

        saveNameBtn.addEventListener('click', () => {
            const newName = newNameInput.value.trim();
            if (newName && newName !== currentUser.displayName) {
                currentUser.displayName = newName;
                userName.textContent = newName;
                editNameModal.style.display = 'none';
                showNotification("–ò–º—è –∏–∑–º–µ–Ω–µ–Ω–æ", "success");
            }
        });

        // –ú–∏–∫—Ä–æ—Ñ–æ–Ω
        connectVoiceBtn.addEventListener('click', startVoiceChat);
        disconnectVoiceBtn.addEventListener('click', stopVoiceChat);

        // –°–æ–æ–±—â–µ–Ω–∏—è
        sendBtn.addEventListener('click', sendMessage);
        messageInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        // –ê–≤—Ç–æ-–≤—ã—Å–æ—Ç–∞ textarea
        messageInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = Math.min(this.scrollHeight, 120) + 'px';
        });

        // –ó–≤–æ–Ω–∫–∏
        startCallBtn.addEventListener('click', () => startCall(false));
        videoCallBtn.addEventListener('click', () => startCall(true));
        acceptCallBtn.addEventListener('click', acceptCall);
        rejectCallBtn.addEventListener('click', endCall);
        endCallBtn.addEventListener('click', endCall);

        // –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–≤—É–∫–∞
        testAudioBtn.addEventListener('click', testAudio);

        // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ ID –∫–æ–º–Ω–∞—Ç—ã
        copyRoomBtn.addEventListener('click', copyRoomId);
        inviteFriendBtn.addEventListener('click', () => {
            inviteModal.style.display = 'flex';
        });

        copyInviteBtn.addEventListener('click', () => {
            navigator.clipboard.writeText(inviteLink.value).then(() => {
                showNotification("–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞", "success");
            });
        });

        closeInviteBtn.addEventListener('click', () => {
            inviteModal.style.display = 'none';
        });

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞
        addContactBtn.addEventListener('click', () => {
            addContactModal.style.display = 'flex';
        });

        cancelAddContactBtn.addEventListener('click', () => {
            addContactModal.style.display = 'none';
        });

        saveContactBtn.addEventListener('click', () => {
            const id = parseInt(contactIdInput.value.trim());
            
            if (!id || id < 1) {
                showNotification("–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π ID", "error");
                return;
            }
            
            if (id === currentUser.id) {
                showNotification("–ù–µ–ª—å–∑—è –¥–æ–±–∞–≤–∏—Ç—å —Å–∞–º–æ–≥–æ —Å–µ–±—è", "warning");
                return;
            }
            
            if (contacts.some(c => c.id === id)) {
                showNotification("–ö–æ–Ω—Ç–∞–∫—Ç —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç", "warning");
                return;
            }
            
            // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–∞–∫—Ç–∞
            const newContact = {
                id,
                name: `–ì–æ—Å—Ç—å-${id}`,
                avatar: `–ì${id}`,
                status: "online",
                lastSeen: Date.now()
            };
            
            contacts.push(newContact);
            saveContacts();
            updateContactsList();
            
            addContactModal.style.display = 'none';
            contactIdInput.value = '';
            
            showNotification(`–ö–æ–Ω—Ç–∞–∫—Ç –ì–æ—Å—Ç—å-${id} –¥–æ–±–∞–≤–ª–µ–Ω`, "success");
            
            // –û—Ç–∫—Ä—ã–≤–∞–µ–º —á–∞—Ç —Å –Ω–æ–≤—ã–º –∫–æ–Ω—Ç–∞–∫—Ç–æ–º
            openPrivateChat(newContact);
        });

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –∏—Ö
        document.querySelectorAll('.modal-overlay').forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.style.display = 'none';
                }
            });
        });

        // –ò–º–∏—Ç–∞—Ü–∏—è –≤—Ö–æ–¥—è—â–µ–≥–æ –∑–≤–æ–Ω–∫–∞ (–¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏)
        setInterval(() => {
            if (contacts.length > 0 && !callPanel.classList.contains('active') && Math.random() > 0.95) {
                const randomContact = contacts[Math.floor(Math.random() * contacts.length)];
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫
                callPanel.classList.add('active');
                callTitle.textContent = "–í—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫";
                callSubtitle.textContent = randomContact.name;
                callUserName.textContent = randomContact.name;
                callUserAvatar.textContent = randomContact.avatar;
                callStatus.textContent = "–í—Ö–æ–¥—è—â–∏–π –≤—ã–∑–æ–≤...";
                
                acceptCallBtn.style.display = 'block';
                rejectCallBtn.style.display = 'block';
                endCallBtn.style.display = 'none';
                
                callUserAvatar.classList.add('ringing-animation');
                
                showNotification(`–í—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫ –æ—Ç ${randomContact.name}`, "warning");
                playSound('connect');
            }
        }, 30000); // –ö–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥ —Å–ª—É—á–∞–π–Ω—ã–π –≤—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫
    </script>
</body>
</html>
